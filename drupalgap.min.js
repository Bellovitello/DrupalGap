/*! drupalgap 2015-12-12 */
var drupalgap={};drupalgap.getMode=function(){return"undefined"!=typeof drupalgap.settings.mode?drupalgap.settings.mode:"web-app"},drupalgap.setMode=function(a){drupalgap.settings.mode=a},drupalgap.start=function(){"phonegap"==drupalgap.getMode()?document.addEventListener("deviceready",this.deviceready,!1):this.deviceready()},drupalgap.deviceready=function(){if(this.bootstrap(),!jDrupal.isReady())return void this.alert("Set the sitePath in the settings.js file!");jDrupal.moduleInvokeAll("deviceready");var a=this.devicereadyOptions();jDrupal.connect(a)},drupalgap.devicereadyOptions=function(){return{success:function(){jDrupal.moduleInvokeAll("device_connected"),drupalgap["goto"]("")},error:function(a,b,c){var d="Failed connection to "+jDrupal.sitePath();""!=c&&(d+=" - "+c),drupalgap.alert(d,{title:"Unable to Connect",alertCallback:function(){}})}}},drupalgap.bootstrap=function(){this.router.config({});var a=jDrupal.modulesLoad();for(var b in a)if(a.hasOwnProperty(b)){var c=window[b].routing();if(c)for(route in c)if(c.hasOwnProperty(route)){var d=c[route];this.router.add(d.path,d.defaults._controller)}}this.router.add(function(){console.log("default")}).listen()},drupalgap["goto"]=function(a){},drupalgap.alert=function(a){var b=null;arguments[1]&&(b=arguments[1]);var c=function(){},d="Alert",e="OK";b&&(b.alertCallback&&(c=b.alertCallback),b.title&&(d=b.title),b.buttonName&&(e=b.buttonName)),"phonegap"!=drupalgap.getMode()||"undefined"==typeof navigator.notification?(alert(a),c()):navigator.notification.alert(a,c,d,e)},drupalgap.Module=function(){},drupalgap.Module.prototype=new jDrupal.Module,drupalgap.Module.prototype.constructor=drupalgap.Node,drupalgap.Module.prototype.routing=function(){return null},drupalgap.router={routes:[],mode:null,root:"/",config:function(a){return this.mode=a&&a.mode&&"history"==a.mode&&history.pushState?"history":"hash",this.root=a&&a.root?"/"+this.clearSlashes(a.root)+"/":"/",this},getFragment:function(){var a="";if("history"===this.mode)a=this.clearSlashes(decodeURI(location.pathname+location.search)),a=a.replace(/\?(.*)$/,""),a="/"!=this.root?a.replace(this.root,""):a;else{var b=window.location.href.match(/#(.*)$/);a=b?b[1]:""}return this.clearSlashes(a)},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},add:function(a,b){return"function"==typeof a&&(b=a,a=""),this.routes.push({re:a,handler:b}),this},remove:function(a){for(var b,c=0;c<this.routes.length,b=this.routes[c];c++)if(b.handler===a||b.re.toString()===a.toString())return this.routes.splice(c,1),this;return this},flush:function(){return this.routes=[],this.mode=null,this.root="/",this},check:function(a){var b=a||this.getFragment();b=this.root+b;for(var c=0;c<this.routes.length;c++){var d=b.match(this.routes[c].re);if(d)return d.shift(),this.routes[c].handler.apply({},[{success:function(a){document.getElementById("dg-app").innerHTML=a}}]),this}return this},listen:function(){var a=this,b=a.getFragment(),c=function(){b!==a.getFragment()&&(b=a.getFragment(),a.check(b))};return clearInterval(this.interval),this.interval=setInterval(c,50),this},navigate:function(a){if(a=a?a:"","history"===this.mode){var b=this.root+this.clearSlashes(a);history.pushState(null,null,b)}else window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a;return this},getRoutes:function(){return this.routes}};